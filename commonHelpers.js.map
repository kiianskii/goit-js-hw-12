{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-API.js","../src/js/render-functions.js","../src/js/modules/helpers.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\n// export function getImages(userValue) {\n//   const BASE_URL = 'https://pixabay.com/';\n//     const END_POINT = 'api/';\n//   const params = new URLSearchParams({\n//       key: \"42734676-8c749a784e7b90411d6581e4f\",\n//       q: userValue,\n//       image_type: \"photo\",\n//       orientation: \"horizontal\",\n//       safesearch: true,\n//   });\n//   const url = `${BASE_URL}${END_POINT}?${params}`;\n\n//     return fetch(url).then(res => {\n//         if (!res.ok) throw new Error(res.status);\n//         return res.json()\n//     });\n// }\n\nexport async function getImages(userValue, page) {\n  const url = 'https://pixabay.com/api/';\n  const params = {\n      key: \"42734676-8c749a784e7b90411d6581e4f\",\n      q: userValue,\n      image_type: \"photo\",\n      orientation: \"horizontal\",\n    safesearch: true,\n    page,\n    per_page: 15,\n  };\n return await axios.get(url, { params })\n}\n\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\n\n export const gallery = document.querySelector(\".gallery\")\n\nexport function renderImages(arr) {\n  const markup = renderMarkup(arr);\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    lightbox.refresh();\n}\n\n\nfunction renderMarkup(arr) {\n    return arr.map(createImageCard).join(\"\\n\");\n}\n function createImageCard(img) {\n   \n    return `<li class=\"gallery-item\">\n                <a class=\"gallery-link\" href=\"${img.largeImageURL}\">\n                    <img\n                        class=\"gallery-image\"\n                        src=\"${img.webformatURL}\"\n                        alt=\"${img.tags}\"\n                        width=\"${img.previewWidth}\"\n                        height=\"${img.previewHeight}\"\n                    />\n                </a>\n                <ul class=\"description\">\n                        <li class=\"desc-item\">\n                            <h3 class=\"des-head\">Likes</h3>\n                            <p>${img.likes}</p>\n                        </li>\n                        <li class=\"desc-item\">\n                            <h3 class=\"des-head\">Views</h3>\n                            <p>${img.views}</p>\n                        </li>\n                        <li class=\"desc-item\">\n                            <h3 class=\"des-head\">Comments</h3>\n                            <p>${img.comments}</p>\n                        </li>\n                        <li class=\"desc-item\">\n                            <h3 class=\"des-head\">Downloads</h3>\n                            <p>${img.downloads}</p>\n                        </li>\n                    </ul>\n            </li>`;\n}\n\nexport function clearMarkup() {\n    gallery.innerHTML = \"\";\n\n}","\nimport iziToast from 'izitoast';\n\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst loader = document.querySelector(\".loader\")\nexport const loadBtn = document.querySelector(\".load-button\")\n\n\nexport function showLoader() {\n    loader.classList.remove(\"is-hide\")\n}\n\nexport function hideLoader() {\n    loader.classList.add(\"is-hide\")\n}\nexport function showMessage(message) {\n    const msgOptions = {\n        message,\n        messageSize: '16px',\n        messageLineHeight: '24px',\n        messageColor: '#fff',\n\n        backgroundColor: '#EF4040',\n        progressBarColor: '#B51B1B',\n\n        theme: 'dark',\n        position: 'topRight',\n        class: 'message',\n    };\n    iziToast.show(msgOptions);\n}\n\nexport function showLoadBtn() {\n    loadBtn.classList.remove(\"is-hide\")\n}\n\nexport function hideLoadBtn() {\n    loadBtn.classList.add(\"is-hide\")\n}\n\n","import { getImages } from \"./js/pixabay-API\";\nimport { renderImages, clearMarkup, gallery } from \"./js/render-functions\";\nimport { showLoader, hideLoader, showMessage, showLoadBtn, hideLoadBtn, loadBtn } from \"./js/modules/helpers\";\n\nconst formEl = document.querySelector(\".search-form\")\nconst imgCard = gallery.querySelector(\".gallery-item\")\n\nformEl.addEventListener(\"submit\", onSubmitBtn);\nloadBtn.addEventListener(\"click\", onLoadBtn)\n\nconst msgErr = \"Sorry, there are no images matching your search query. Please try again!\";\nconst msgEmpty = \"Error, empty field\";\nconst msgEndLoad = \"We're sorry, but you've reached the end of search results.\"\n\nlet page = 1;\nlet userWord;\nconst per_page = 15;\n\n\nasync function onSubmitBtn(e){\n    e.preventDefault();\n    showLoader();\n    clearMarkup();\n    hideLoadBtn()\n\n    const userValue = e.target.elements.data.value.trim().split(\" \")\n    userWord = userValue.filter(word => word).join('+');\n    if (!userWord) {\n        clearMarkup()\n        showMessage(msgEmpty)\n        hideLoader()\n        return;\n    }\n\n    try {\n    const result = await getImages(userWord, page)\n         \n        if (result.data.hits.length === 0) {\n            hideLoader();\n            showMessage(msgErr);\n        } else {\n            renderImages(result.data.hits)\n            showLoadBtn()\n        }    \n        hideLoader()\n       \n         if (result.data.totalHits <= per_page) { \n            hideLoadBtn()\n        }\n\n    } catch {\n        console.log(result)\n        hideLoader()\n    }\n   \n    e.target.reset()\n};\n\nasync function onLoadBtn() {\n    showLoader()\n    page += 1;\n\n    try {\n        const res = await getImages(userWord, page)\n        const lastPage = Math.ceil(res.data.totalHits / per_page);\n        renderImages(res.data.hits);\n\n        if (lastPage === page) {\n            hideLoadBtn();\n           showMessage(msgEndLoad)\n        }\n        hideLoader()\n         } catch (err) {\n        console.log(err)\n        hideLoader()\n        }\n\n\n}\n \n"],"names":["getImages","userValue","page","url","params","axios","lightbox","SimpleLightbox","gallery","renderImages","arr","markup","renderMarkup","createImageCard","img","clearMarkup","loader","loadBtn","showLoader","hideLoader","showMessage","message","msgOptions","iziToast","showLoadBtn","hideLoadBtn","formEl","onSubmitBtn","onLoadBtn","msgErr","msgEmpty","msgEndLoad","userWord","per_page","word","result","res","lastPage","err"],"mappings":"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"}